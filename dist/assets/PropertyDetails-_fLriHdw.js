import{c as v,u as F,j as e,H as R,M as E}from"./index-PAwGZwdm.js";import{r as d,M as A,d as Y}from"./mapbox-gl-BQyo5stt.js";/* empty css                  */import{e as q,b as X}from"./client-DjafAzYx.js";import{C as T}from"./chevron-left-CBMoU3MC.js";import{C as N}from"./chevron-right-BVRLYkCi.js";import{d as D}from"./vendor-CWHnZUEh.js";const H=[["path",{d:"M10 4 8 6",key:"1rru8s"}],["path",{d:"M17 19v2",key:"ts1sot"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M7 19v2",key:"12npes"}],["path",{d:"M9 5 7.621 3.621A2.121 2.121 0 0 0 4 5v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"14ym8i"}]],O=v("bath",H);const U=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],V=v("bed",U);const Z=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],J=v("ruler",Z),K="pk.eyJ1IjoiYWJpZXNwYW5hIiwiYSI6ImNsb3N4NzllYzAyOWYybWw5ZzNpNXlqaHkifQ.UxlTvUuSq9L5jt0jRtRR-A",Q="mapbox://styles/mapbox/streets-v12",C=({src:o,alt:c,style:x})=>{const[r,y]=d.useState(!1);return r||!o?null:e.jsx("img",{src:o,alt:c,style:x,onError:()=>y(!0)})};function le(){const{t:o,language:c}=F(),{id:x}=D(),[r,y]=d.useState(null),[M,g]=d.useState(!0),[w,W]=d.useState([]),[a,k]=d.useState(!1),u=d.useRef(null),S=t=>{if(u.current){const i=u.current,s=i.clientWidth;i.scrollBy({left:t==="left"?-s:s,behavior:"smooth"})}};if(d.useEffect(()=>{g(!0),window.scrollTo(0,0),q(x).then(t=>{y(t),g(!1),X().then(i=>{const s=t.price,n=s*.95,p=s*1.05,f=i.filter(l=>{if(l.id===t.id||l.price&&(l.price<n||l.price>p)||t.property_type&&l.market&&l.market!==t.property_type)return!1;const I=l.bedrooms||l.beds,_=t.beds||t.bedrooms;if(I&&_&&Math.abs(I-_)>1)return!1;const b=l.location?.name||"",j=t.town||"";return!(j&&b&&!b.includes(j)&&!j.includes(b))}).slice(0,10);W(f)})}).catch(t=>{console.error(t),g(!1)})},[x]),M)return e.jsx("div",{style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:o("common.loading")});if(!r)return e.jsx("div",{style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:o("common.noResults")});const B=new Intl.NumberFormat(c==="es"?"es-ES":"en-US",{style:"currency",currency:r.currency||"EUR",maximumFractionDigits:0}),h={width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",fontFamily:"inherit",fontSize:"14px"};r.images&&r.images.length>1;const P=(r.images||[]).map(t=>typeof t=="string"?t:t&&typeof t=="object"?t.image_url||t.url||t.path:null).filter(t=>t&&typeof t=="string"&&t.length>10&&t.trim().startsWith("http")),m=[...new Set(P)],$=((t,i)=>{const s=[];for(let n=0;n<t.length;n+=i)s.push(t.slice(n,n+i));return s})(m,6),z=m.length===1,L=()=>r.property_type==="New Building"?o("property.badge.new"):r.property_type==="Rent"?o("property.badge.rent"):o("property.badge.secondary");return e.jsx("div",{style:{paddingBottom:"4rem",background:"#fff",paddingTop:"80px"},children:e.jsxs("div",{className:"container",style:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem"},children:[e.jsxs("div",{style:{position:"relative",height:z?"500px":"600px",marginBottom:"3rem",marginTop:"2rem"},children:[e.jsxs("div",{style:{display:"flex",overflowX:"auto",height:"100%",scrollSnapType:"x mandatory",scrollbarWidth:"none",width:"100%",borderRadius:"24px",gap:"20px"},className:"gallery-scroll",children:[e.jsx("style",{children:`
                            .gallery-scroll::-webkit-scrollbar { display: none; }
                            .gallery-grid-page {
                                display: grid;
                                grid-template-columns: repeat(3, 1fr);
                                grid-auto-rows: 290px;
                                gap: 10px;
                                flex: 0 0 100%;
                                min-width: 100%;
                                scroll-snap-align: start;
                            }
                            .single-image-layout {
                                width: 100%;
                                height: 100%;
                                flex: 0 0 100%;
                                scroll-snap-align: start;
                            }
                            @media (max-width: 768px) {
                                .gallery-grid-page {
                                    grid-template-columns: repeat(2, 1fr);
                                    grid-auto-rows: 200px;
                                }
                            }
                        `}),z?e.jsx("div",{className:"single-image-layout",children:e.jsx(C,{src:m[0],alt:"Property View",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"24px"}})}):$.map((t,i)=>e.jsx("div",{className:"gallery-grid-page",children:t.map((s,n)=>e.jsx("div",{style:{position:"relative",overflow:"hidden",borderRadius:"12px"},children:e.jsx(C,{src:s,alt:`Property View ${i*6+n+1}`,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}})},n))},i))]}),m.length>6&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{const t=document.querySelector(".gallery-scroll");t.scrollBy({left:-t.offsetWidth-20,behavior:"smooth"})},style:{position:"absolute",top:"50%",left:"-22px",transform:"translateY(-50%)",background:"white",border:"1px solid #eee",borderRadius:"50%",width:"44px",height:"44px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",zIndex:10},children:e.jsx(T,{size:24,color:"#333"})}),e.jsx("button",{onClick:()=>{const t=document.querySelector(".gallery-scroll");t.scrollBy({left:t.offsetWidth+20,behavior:"smooth"})},style:{position:"absolute",top:"50%",right:"-22px",transform:"translateY(-50%)",background:"white",border:"1px solid #eee",borderRadius:"50%",width:"44px",height:"44px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",zIndex:10},children:e.jsx(N,{size:24,color:"#333"})})]}),e.jsx("div",{style:{position:"absolute",top:"20px",right:"20px",display:"flex",gap:"10px",zIndex:10},children:e.jsx("button",{onClick:()=>k(!a),style:{background:"white",border:"none",borderRadius:"50%",width:"44px",height:"44px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:e.jsx(R,{size:20,fill:a?"red":"none",color:a?"red":"#333"})})})]}),e.jsxs("div",{className:"property-main-content",children:[e.jsxs("div",{className:"property-info-column",children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("div",{className:"property-header-row",children:[e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:"12px",fontWeight:600,textTransform:"uppercase",letterSpacing:"1px",color:"#888",background:"#f5f5f5",padding:"6px 12px",borderRadius:"4px"},children:L()}),e.jsx("h1",{className:"property-title",children:(()=>{const t=(r.property_type||"").toLowerCase().includes("new building"),i=r["title_"+c]||r.title_en||r.title;if(t)return r.development_name||i||`Property ${r.reference_id}`;const s=r.beds>0?`${r.beds} ${o("property.beds")} `:"",n=r.type||r.property_type||"Property",p=[r.town,r.province].filter(Boolean).join(", ");return i||`${s}${n}${p?` ${o("common.in")} ${p}`:""}`})()})]}),e.jsxs("button",{onClick:()=>k(!a),className:"add-to-fav-btn",children:[e.jsx(R,{size:18,fill:a?"red":"none",color:a?"red":"#333"}),e.jsx("span",{children:o(a?"property.form.interested":"common.addToFav")})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",color:"#666"},children:[e.jsx(E,{size:16}),r.town,", ",r.province]}),e.jsxs("div",{style:{marginTop:"1.5rem",fontSize:"28px",fontWeight:700,color:"#1a1a1a"},children:[B.format(r.price),r.market==="rent"&&e.jsx("span",{style:{fontSize:"16px",fontWeight:400,color:"#666"},children:o("property.month")})]})]}),e.jsxs("div",{style:{display:"flex",gap:"2rem",padding:"1.5rem 0",borderTop:"1px solid #eee",borderBottom:"1px solid #eee",marginBottom:"2rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(V,{size:20,color:"#666"})," ",e.jsxs("span",{children:[e.jsx("b",{children:r.beds})," ",o("property.beds")]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(O,{size:20,color:"#666"})," ",e.jsxs("span",{children:[e.jsx("b",{children:r.baths})," ",o("property.baths")]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx(J,{size:20,color:"#666"})," ",e.jsxs("span",{children:[e.jsx("b",{children:r.built_area})," mÂ²"]})]})]}),e.jsxs("div",{style:{marginBottom:"3rem"},children:[e.jsx("h3",{style:{fontSize:"20px",marginBottom:"1rem"},children:o("property.description")}),e.jsx("p",{style:{lineHeight:"1.6",color:"#444"},children:r["description_"+c]||r.description_en||r.description}),r.amenities&&e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px",marginTop:"1.5rem"},children:r.amenities.map((t,i)=>e.jsx("span",{style:{background:"#f9f9f9",padding:"6px 12px",borderRadius:"6px",fontSize:"13px",color:"#555",border:"1px solid #eee"},children:t},`${t}-${i}`))})]}),e.jsx("div",{style:{borderRadius:"16px",overflow:"hidden",height:"300px",marginBottom:"2rem",boxShadow:"0 4px 20px rgba(0,0,0,0.05)"},children:e.jsx(A,{initialViewState:{longitude:r.longitude||-4.9,latitude:r.latitude||36.5,zoom:14},style:{width:"100%",height:"100%"},mapStyle:Q,mapboxAccessToken:K,attributionControl:!1,children:e.jsx(Y,{longitude:r.longitude||-4.9,latitude:r.latitude||36.5,color:"black"})})})]}),e.jsx("div",{style:{flex:"1",minWidth:"300px"},children:e.jsxs("div",{style:{position:"sticky",top:"2rem",background:"#fbfbfb",padding:"2rem",borderRadius:"16px",border:"1px solid #eee"},children:[e.jsx("h3",{style:{fontSize:"20px",marginBottom:"0.5rem"},children:o("property.form.interested")}),e.jsx("p",{style:{color:"#666",marginBottom:"1.5rem",fontSize:"14px"},children:o("property.form.subtitle")}),e.jsxs("form",{onSubmit:t=>t.preventDefault(),children:[e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsx("input",{type:"text",placeholder:o("property.form.name"),style:h})}),e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsx("input",{type:"tel",placeholder:o("property.form.phone"),style:h})}),e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsx("input",{type:"email",placeholder:o("property.form.email"),style:h})}),e.jsx("div",{style:{marginBottom:"1.5rem"},children:e.jsx("textarea",{rows:"4",placeholder:o("property.form.message"),defaultValue:o("property.form.defaultMessage").replace("{property}",r.development_name||r.reference_id),style:{...h,resize:"vertical"}})}),e.jsx("button",{style:{width:"100%",padding:"14px",background:"#1a1a1a",color:"white",border:"none",borderRadius:"8px",fontWeight:600,cursor:"pointer",fontFamily:"inherit"},children:o("property.form.send")})]})]})})]}),w.length>0&&e.jsxs("div",{style:{marginTop:"4rem",padding:"2rem 0",borderTop:"1px solid #eee"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[e.jsx("h2",{style:{fontSize:"24px",margin:0},children:o("property.similar")}),e.jsxs("div",{style:{display:"flex",gap:"0.8rem"},children:[e.jsx("button",{onClick:()=>S("left"),style:{background:"white",border:"1px solid #eee",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s"},children:e.jsx(T,{size:20,color:"#333"})}),e.jsx("button",{onClick:()=>S("right"),style:{background:"white",border:"1px solid #eee",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s"},children:e.jsx(N,{size:20,color:"#333"})})]})]}),e.jsxs("div",{className:"similar-scroll",ref:u,style:{display:"flex",gap:"1.5rem",overflowX:"auto",paddingBottom:"1rem",scrollSnapType:"x mandatory",scrollbarWidth:"none"},children:[e.jsx("style",{children:".similar-scroll::-webkit-scrollbar { display: none; }"}),w.map(t=>{const i=(t.property_type||"").toLowerCase();let s="new-building";i.includes("rent")?s="rent":i.includes("secondary")&&(s="secondary");let n=t.development_name||t.title||"Luxury Property";if(!i.includes("new building")){const f=t.beds>0||t.bedrooms>0?`${t.beds||t.bedrooms} ${o("property.beds")} `:"",l=t.type||t.property_type||"Property";n=`${f}${l}`}const p=t.images&&t.images[0]?.image_url||t.images&&t.images[0]||t.image||"https://via.placeholder.com/280x200";return e.jsxs("a",{href:`/${s}/${t.id}`,style:{flex:"0 0 280px",textDecoration:"none",color:"inherit",scrollSnapAlign:"start"},children:[e.jsx("div",{style:{height:"200px",borderRadius:"12px",overflow:"hidden",marginBottom:"1rem",background:"#eee"},children:e.jsx("img",{src:p,alt:n,style:{width:"100%",height:"100%",objectFit:"cover"}})}),e.jsx("h4",{style:{fontSize:"16px",fontWeight:600,marginBottom:"4px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:n}),e.jsx("div",{style:{fontSize:"14px",color:"#666",marginBottom:"4px"},children:t.town||t.location?.name}),e.jsx("div",{style:{fontSize:"16px",fontWeight:700},children:B.format(t.price)})]},t.id)})]})]})]})})}export{le as default};
