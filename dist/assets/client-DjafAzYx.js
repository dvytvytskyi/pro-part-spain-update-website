const p="fyr_b082c3f25f3b5742bb24a7e1617e2dcc1c1fba59359e457f",l="6f993e582bf1b344facdcce38e782a1368beccef6778266fb7a624b254d291b0",f={"Content-Type":"application/json","x-api-key":p,"x-api-secret":l};async function s(e,t={}){const a=`${e}`;console.log("[API Request]",a);const r=await fetch(a,{...t,headers:{...f,...t.headers}});if(!r.ok)throw new Error(`API Error: ${r.status}`);return r.json()}async function h(e={}){try{let t;if(e instanceof URLSearchParams)t=e.toString();else{const a=new URLSearchParams;Object.entries(e).forEach(([r,n])=>{Array.isArray(n)?n.forEach(o=>a.append(r,o)):n!=null&&n!==""&&a.append(r,n)}),t=a.toString()}return await s(`/api/properties?${t}`)}catch(t){return console.error("Failed to fetch properties:",t),{data:[],totalItems:0,totalPages:0,currentPage:1}}}async function d(e={}){try{let t;if(e instanceof URLSearchParams)t=e.toString();else{const r=new URLSearchParams;Object.entries(e).forEach(([n,o])=>{Array.isArray(o)?o.forEach(c=>r.append(n,c)):o!=null&&o!==""&&r.append(n,o)}),t=r.toString()}return(await s(`/api/properties/map?${t}`)).data||[]}catch(t){console.error("Failed to fetch map properties:",t);const a=[],r=["new-building","secondary","rent"],n=["https://images.unsplash.com/photo-1600596542815-6ad4c721326d?auto=format&fit=crop&w=300&q=80","https://images.unsplash.com/photo-1512917774080-9991f1c4c750?auto=format&fit=crop&w=300&q=80"];for(let o=1;o<=40;o++){const c=36.45+Math.random()*.15,i=-5+Math.random()*.2;a.push({id:o,coordinates:[i,c],latitude:c,longitude:i,price:Math.floor(2e5+Math.random()*3e6),bedrooms:Math.floor(1+Math.random()*5),property_type:r[Math.floor(Math.random()*r.length)],development_name:`Luxury Property ${o}`,town:["Marbella","Puerto Banus","Nueva Andalucia"][Math.floor(Math.random()*3)],images:[{image_url:n[o%n.length]}]})}return a}}async function u(e){try{return await s(`/api/properties/${e}`)}catch(t){return console.error(`Failed to fetch property ${e}:`,t),null}}async function y(){try{const e=await s("/api/news");return(Array.isArray(e)?e:[]).filter(a=>a.published===!0).sort((a,r)=>new Date(r.created_at)-new Date(a.created_at))}catch(e){return console.error("Failed to fetch news:",e),[]}}async function m(e){try{return await s(`/api/news/${e}`)}catch(t){return console.error(`Failed to fetch news article ${e}:`,t),null}}async function g(){try{const[e,t]=await Promise.all([s("/api/settings/locations"),s("/api/settings/amenities")]);return{locations:e,amenities:t}}catch(e){return console.error("Failed to fetch filter options:",e),{locations:[],amenities:[]}}}export{y as a,d as b,g as c,m as d,u as e,h as g};
