import{r as m,c as _}from"./mapbox-gl-Baw0grWs.js";import{c as V}from"./vendor-B3DjV561.js";import{c as X,u as G,j as e,C as R,X as H}from"./index-OEqjzcPY.js";import{s as J,S as K}from"./staticLocations-DyS3-l-A.js";/* empty css                          */import{C as I}from"./check-B9_4u16q.js";import{c as Q}from"./client-DjafAzYx.js";const Y=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],Z=X("sliders-horizontal",Y);function me(o,s={}){const[n,l]=V(),x=m.useMemo(()=>{const t={...s},i=O=>{const w=n.get(O);return w?w.split(","):[]};return n.has("search")&&(t.search=n.get("search")),n.has("type")&&(t.type=i("type")),n.has("bedrooms")&&(t.bedrooms=i("bedrooms")),n.has("baths")&&(t.baths=Number(n.get("baths"))||""),n.has("amenities")&&(t.amenities=i("amenities")),n.has("priceMin")&&(t.priceMin=Number(n.get("priceMin"))||""),n.has("priceMax")&&(t.priceMax=Number(n.get("priceMax"))||""),n.has("sizeMin")&&(t.sizeMin=Number(n.get("sizeMin"))||""),n.has("sizeMax")&&(t.sizeMax=Number(n.get("sizeMax"))||""),n.has("sort")&&(t.sort=n.get("sort")),n.has("location")&&(t.location=i("location")),n.has("rentType")&&(t.rentType=n.get("rentType")),n.has("market")&&(t.market=n.get("market")),n.has("polygon")&&(t.polygon=n.get("polygon")),n.has("ids")&&(t.ids=i("ids")),t},[n,s]),[a,g]=m.useState(x);m.useEffect(()=>{g(x)},[x]);const $=parseInt(n.get("page")||"1",10),j=t=>{const i=new URLSearchParams(n);i.set("page",t.toString()),l(i),window.scrollTo(0,0)},y=m.useCallback(t=>{const i=new URLSearchParams;t.search&&i.set("search",t.search),t.type?.length&&i.set("type",t.type.join(",")),t.bedrooms?.length&&i.set("bedrooms",t.bedrooms.join(",")),t.baths&&i.set("baths",t.baths),t.amenities?.length&&i.set("amenities",t.amenities.join(",")),t.location?.length&&i.set("location",t.location.join(",")),t.priceMin&&i.set("priceMin",t.priceMin),t.priceMax&&i.set("priceMax",t.priceMax),t.sizeMin&&i.set("sizeMin",t.sizeMin),t.sizeMax&&i.set("sizeMax",t.sizeMax),t.sort&&i.set("sort",t.sort),t.rentType&&i.set("rentType",t.rentType),t.rentType&&i.set("rentType",t.rentType),t.market&&i.set("market",t.market),t.polygon&&i.set("polygon",t.polygon),t.ids?.length&&i.set("ids",t.ids.join(",")),i.set("page","1"),l(i,{replace:!0})},[l]),S=t=>{g(t),y(t)};return{filters:a,setFilters:S,currentPage:$,setPage:j,clearFilters:()=>{const t={...s};s.type&&(t.type=[]),S(t)}}}function D({selectedAreas:o=[],onChange:s,alignRight:n=!1}){const{t:l}=G(),[x,a]=m.useState(!1),[g,$]=m.useState([]),[j,y]=m.useState([]),[S,W]=m.useState(!0),t=m.useRef(null);m.useEffect(()=>{const c=Object.entries(J).map(([d,b])=>{const L=[...b].sort((N,k)=>N.localeCompare(k));return{name:d,areas:[d,...L]}});y(c),W(!1)},[]),m.useEffect(()=>{const c=d=>{t.current&&!t.current.contains(d.target)&&a(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]);const i=c=>{g.includes(c)?$(g.filter(d=>d!==c)):$([...g,c])},O=c=>{const d=o.includes(c)?o.filter(b=>b!==c):[...o,c];s(d)},w=c=>{const d=j.find(b=>b.name===c);return d?d.areas.filter(b=>o.includes(b)).length:0};return e.jsxs("div",{className:"filter-dropdown-wrapper",ref:t,children:[e.jsxs("div",{className:`filter-dropdown-trigger ${x?"active":""}`,onClick:()=>a(!x),children:[e.jsx("span",{className:"trigger-label",children:o.length>0?l("search.selected").replace("{count}",o.length):l("search.placeholder")}),e.jsx(R,{size:18,className:`trigger-icon ${x?"rotate":""}`})]}),x&&e.jsx("div",{className:`filter-dropdown-menu location-menu ${n?"align-right":""}`,children:S?e.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#666"},children:l("common.loading")}):j.map(c=>e.jsxs("div",{className:`location-group ${g.includes(c.name)?"expanded":""}`,children:[e.jsxs("div",{className:"location-group-header",onClick:()=>i(c.name),children:[e.jsxs("div",{className:"group-info",children:[w(c.name)>0&&e.jsx("span",{className:"count-badge",children:w(c.name)}),e.jsx("span",{className:"group-title",children:c.name})]}),e.jsx(R,{size:16,className:`group-arrow ${g.includes(c.name)?"rotate":""}`})]}),g.includes(c.name)&&e.jsx("div",{className:"location-list",children:c.areas.map(d=>e.jsxs("label",{className:"location-item",children:[e.jsx("span",{className:"location-name",children:d}),e.jsx("div",{className:`checkbox-custom ${o.includes(d)?"checked":""}`,children:o.includes(d)&&e.jsx(I,{size:12,strokeWidth:3})}),e.jsx("input",{type:"checkbox",checked:o.includes(d),onChange:()=>O(d),style:{display:"none"}})]},d))})]},c.name))})]})}const F=()=>{const o=[];let s=2e5;for(;s<=15e5;)o.push({value:s,label:`€${(s/1e3).toLocaleString()}k`}),s+=1e5;const n=[];for(let l=2e5;l<=15e5;l+=1e5)n.push(l);for(let l=17e5;l<=25e5;l+=2e5)n.push(l);for(let l=3e6;l<=1e7;l+=1e6)n.push(l);for(let l=2e7;l<=5e7;l+=1e7)n.push(l);return n.map(l=>({value:l,label:l>=1e6?`€${(l/1e6).toLocaleString()}M`:`€${(l/1e3).toLocaleString()}k`}))},ee=()=>{const o=[];for(let s=1500;s<=5e3;s+=200)o.push(s);for(let s=6e3;s<=2e4;s+=1e3)o.push(s);return o.map(s=>({value:s,label:`€${s.toLocaleString()}`}))},se=()=>{const o=[];for(let s=30;s<=150;s+=10)o.push(s);for(let s=180;s<=450;s+=30)o.push(s);for(let s=500;s<=1e3;s+=50)o.push(s);return o.map(s=>({value:s,label:`${s} m²`}))},te=[{value:"studio",label:"Studio"},{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6+"}],ae=[{value:"Apartment",label:"Apartment"},{value:"House",label:"House"},{value:"Plot",label:"Plot"},{value:"Commercial",label:"Commercial"}];function pe({pageType:o,filters:s,onFilterChange:n,onClearFilters:l,totalCount:x}){const{t:a}=G(),g=m.useMemo(()=>o==="rent"?ee():F(),[o]),$=m.useMemo(()=>se(),[]),[j,y]=m.useState(!1),S=m.useMemo(()=>ae.map(r=>({...r,label:a(`filters.propertyTypes.${r.value.toLowerCase()}`)})),[a]),W=m.useMemo(()=>te.map(r=>({...r,label:r.value==="studio"?a("filters.studio"):r.label})),[a]),t=m.useMemo(()=>[{value:"recommended",label:a("filters.recommended")},{value:"newest",label:a("filters.sort.newest")},{value:"price_asc",label:a("filters.sort.priceAsc")},{value:"price_desc",label:a("filters.sort.priceDesc")}],[a]);m.useEffect(()=>(j?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[j]);const[i,O]=m.useState([]);m.useEffect(()=>{Q().then(r=>{r.amenities&&O(r.amenities.map(u=>({value:u.name,label:u.name})))})},[]);const w=r=>{n({...s,search:r.target.value})},c=(r,u)=>{const p=s[r]||[],M=p.includes(u)?p.filter(v=>v!==u):[...p,u];n({...s,[r]:M})},[d,b]=m.useState(null),L=r=>{b(d===r?null:r)},N=(r,u,p,M=!1)=>{const v=s[r]||[],C=d===r;return e.jsxs("div",{className:"filter-dropdown-wrapper",children:[e.jsxs("div",{className:`filter-dropdown-trigger ${C?"active":""}`,onClick:()=>L(r),children:[e.jsx("span",{className:"trigger-label",children:v.length>0?r==="bedrooms"?[...v].sort((h,z)=>{const T=h==="studio"?-1:parseInt(h,10),E=z==="studio"?-1:parseInt(z,10);return T-E}).map(h=>h==="studio"?"Studio":h==="6"?"6+":h).join(", "):`${v.length} ${u}`:u}),e.jsx(R,{size:18,className:`trigger-icon ${C?"rotate":""}`})]}),C&&e.jsx("div",{className:`filter-dropdown-menu ${M?"align-right":""}`,children:p.map(h=>e.jsxs("div",{className:"filter-item",onClick:()=>c(r,h.value),children:[e.jsx("div",{className:`checkbox-custom ${v.includes(h.value)?"checked":""}`,children:v.includes(h.value)&&e.jsx(I,{size:12,strokeWidth:3})}),e.jsx("span",{className:"filter-item-label",children:h.label})]},h.value))})]})},[k,P]=m.useState(null);m.useEffect(()=>{P(null)},[d]);const A=(r,u,p,M="",v=!1)=>{const C=d===r,h=f=>f?new Intl.NumberFormat("en-US",{notation:"compact",maximumFractionDigits:1}).format(f):"",z=s[`${r}Min`],T=s[`${r}Max`],E=z||T?`${z?M+h(z):"0"} - ${T?M+h(T):a("filters.any")}`:u,B=(f,U)=>{n({...s,[`${r}${f==="min"?"Min":"Max"}`]:U}),P(null)};return e.jsxs("div",{className:"filter-dropdown-wrapper",children:[e.jsxs("div",{className:`filter-dropdown-trigger ${C?"active":""}`,onClick:()=>L(r),children:[e.jsx("span",{className:"trigger-label",children:E}),e.jsx(R,{size:18,className:`trigger-icon ${C?"rotate":""}`})]}),C&&e.jsx("div",{className:`filter-dropdown-menu overflow-visible ${v?"align-right":""}`,children:e.jsx("div",{className:"range-dropdown-content",children:e.jsxs("div",{className:"range-inputs",children:[e.jsxs("div",{className:"range-input-group",children:[e.jsxs("div",{className:`range-select-trigger ${k==="min"?"active":""}`,onClick:()=>P(k==="min"?null:"min"),children:[e.jsx("span",{children:z?M+h(z):a("filters.min")}),e.jsx(R,{size:14})]}),k==="min"&&e.jsxs("div",{className:"range-options-list",children:[e.jsxs("div",{className:"range-option",onClick:()=>B("min",""),children:[a("filters.min")," (",a("filters.reset"),")"]}),p.map(f=>e.jsx("div",{className:"range-option",onClick:()=>B("min",f.value),children:f.label},f.value))]})]}),e.jsx("span",{style:{color:"#5f5f5f"},children:"-"}),e.jsxs("div",{className:"range-input-group",children:[e.jsxs("div",{className:`range-select-trigger ${k==="max"?"active":""}`,onClick:()=>P(k==="max"?null:"max"),children:[e.jsx("span",{children:T?M+h(T):a("filters.max")}),e.jsx(R,{size:14})]}),k==="max"&&e.jsxs("div",{className:"range-options-list",children:[e.jsxs("div",{className:"range-option",onClick:()=>B("max",""),children:[a("filters.max")," (",a("filters.reset"),")"]}),p.map(f=>e.jsx("div",{className:"range-option",onClick:()=>B("max",f.value),children:f.label},f.value))]})]})]})})})]})},q=()=>{const r=d==="sort",u=t.find(p=>p.value===s.sort)?.label||a("filters.recommended");return e.jsxs("div",{className:"sort-wrapper",style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("span",{className:"sort-label",children:[a("filters.sort.label"),":"]}),e.jsxs("div",{className:"filter-dropdown-wrapper",style:{minWidth:"auto",flex:"none",width:"auto"},children:[e.jsxs("div",{className:`filter-dropdown-trigger sort-trigger ${r?"active":""}`,onClick:()=>L("sort"),style:{padding:"0 0.5rem",height:"auto",minHeight:"auto",border:"none",background:"transparent"},children:[e.jsx("span",{className:"trigger-label",style:{fontWeight:"500",color:"#313131",marginRight:"4px"},children:u}),e.jsx(R,{size:16,className:`trigger-icon ${r?"rotate":""}`})]}),r&&e.jsx("div",{className:"filter-dropdown-menu align-right",style:{width:"200px",right:0,left:"auto",top:"100%"},children:t.map(p=>e.jsxs("div",{className:"filter-item",onClick:()=>{n({...s,sort:p.value}),L(null)},children:[e.jsx("span",{className:`filter-item-label ${s.sort===p.value?"selected-sort":""}`,style:{fontWeight:s.sort===p.value?"600":"400"},children:p.label}),s.sort===p.value&&e.jsx(I,{size:14,strokeWidth:3,color:"#313131"})]},p.value))})]})]})};return e.jsxs("div",{className:"property-filters-container",children:[e.jsxs("div",{className:"filters-container-flex",children:[s.showMarketSelector&&e.jsxs("div",{className:"rent-type-tabs",style:{marginRight:"1rem"},children:[e.jsx("button",{className:`rent-tab ${s.market==="new-building"?"active":""}`,onClick:()=>n({...s,market:"new-building"}),children:a("nav.newBuilding")}),e.jsx("button",{className:`rent-tab ${s.market==="secondary"?"active":""}`,onClick:()=>n({...s,market:"secondary"}),children:a("nav.secondary")}),e.jsx("button",{className:`rent-tab ${s.market==="rent"?"active":""}`,onClick:()=>n({...s,market:"rent"}),children:a("nav.rent")})]}),o==="rent"&&e.jsxs("div",{className:"rent-type-tabs",children:[e.jsx("button",{className:`rent-tab ${s.rentType==="long"?"active":""}`,onClick:()=>n({...s,rentType:"long"}),children:a("filters.rentTerm.long")}),e.jsx("button",{className:`rent-tab ${s.rentType==="short"?"active":""}`,onClick:()=>n({...s,rentType:"short"}),children:a("filters.rentTerm.short")})]}),e.jsxs("div",{className:"search-input-wrapper",children:[e.jsx(K,{size:20,className:"search-icon"}),e.jsx("input",{type:"text",placeholder:a("filters.searchPlaceholder"),className:"search-input",value:s.search,onChange:w})]}),e.jsxs("button",{className:"mobile-filter-btn",onClick:()=>y(!0),children:[e.jsx(Z,{size:18}),e.jsx("span",{children:a("filters.more")})]}),e.jsxs("div",{className:"desktop-filters-wrapper",style:{display:"contents"},children:[N("type",a("filters.type"),S),e.jsx(D,{selectedAreas:s.location,onChange:r=>n({...s,location:r}),alignRight:!0}),N("bedrooms",a("filters.bedrooms"),W,!0),A("price",a("filters.priceRange"),g,"",!0),A("size",a("property.size"),$,"",!0),N("amenities",a("filters.amenities"),i,!0),e.jsx("button",{onClick:l,style:{width:"42px",height:"42px",display:"flex",alignItems:"center",justifyContent:"center",background:"white",border:"1px solid #e0e0e0",borderRadius:"50%",cursor:"pointer",color:"#333",transition:"all 0.2s",flexShrink:0},title:a("filters.clear"),className:"clear-filters-icon-btn",children:e.jsx(H,{size:18})})]})]}),j&&_.createPortal(e.jsx("div",{className:"filter-modal-overlay",onClick:()=>y(!1),children:e.jsxs("div",{className:"filter-modal-content",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"filter-modal-header",children:[e.jsx("h3",{className:"filter-modal-title",children:a("filters.more")}),e.jsx("button",{className:"close-modal-btn",onClick:()=>y(!1),children:e.jsx(H,{size:20})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[s.showMarketSelector&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.8rem",fontWeight:600,color:"#333"},children:"Market"}),e.jsxs("div",{className:"rent-type-tabs",style:{width:"100%",justifyContent:"space-between"},children:[e.jsx("button",{className:`rent-tab ${s.market==="new-building"?"active":""}`,style:{flex:1,textAlign:"center"},onClick:()=>n({...s,market:"new-building"}),children:a("nav.newBuilding")}),e.jsx("button",{className:`rent-tab ${s.market==="secondary"?"active":""}`,style:{flex:1,textAlign:"center"},onClick:()=>n({...s,market:"secondary"}),children:a("nav.secondary")}),e.jsx("button",{className:`rent-tab ${s.market==="rent"?"active":""}`,style:{flex:1,textAlign:"center"},onClick:()=>n({...s,market:"rent"}),children:a("nav.rent")})]})]}),o==="rent"&&e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.8rem",fontWeight:600,color:"#333"},children:"Term"}),e.jsxs("div",{className:"rent-type-tabs",style:{width:"100%"},children:[e.jsx("button",{className:`rent-tab ${s.rentType==="long"?"active":""}`,style:{flex:1,textAlign:"center"},onClick:()=>n({...s,rentType:"long"}),children:a("filters.rentTerm.long")}),e.jsx("button",{className:`rent-tab ${s.rentType==="short"?"active":""}`,style:{flex:1,textAlign:"center"},onClick:()=>n({...s,rentType:"short"}),children:a("filters.rentTerm.short")})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:600,color:"#333"},children:a("filters.type")}),N("type",a("filters.type"),S)]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:600,color:"#333"},children:a("filters.location")}),e.jsx(D,{selectedAreas:s.location,onChange:r=>n({...s,location:r})})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:600,color:"#333"},children:a("filters.bedrooms")}),N("bedrooms",a("filters.bedrooms"),W)]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:600,color:"#333"},children:a("filters.priceRange")}),A("price",a("filters.priceRange"),g,"")]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:600,color:"#333"},children:a("property.size")}),A("size",a("property.size"),$,"")]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:600,color:"#333"},children:a("filters.amenities")}),N("amenities",a("filters.amenities"),i)]})]}),e.jsx("div",{style:{marginTop:"auto",paddingTop:"2rem"},children:e.jsx("button",{onClick:()=>y(!1),style:{width:"100%",padding:"1rem",background:"black",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:600},children:a("filters.showResults").replace("{count}",x)})})]})}),document.body),e.jsxs("div",{className:"filters-bottom-row",children:[e.jsx("div",{className:"results-count",children:x!==void 0?e.jsx("span",{style:{fontSize:"0.9rem",color:"#666",fontWeight:"500"},children:a("filters.resultsFound").replace("{count}",x)}):null}),e.jsxs("div",{className:"filters-actions-right",children:[e.jsx("button",{className:"clear-filters-btn",onClick:l,children:a("filters.clear")}),e.jsx("div",{className:"filter-divider-vertical"}),q()]})]}),d&&e.jsx("div",{style:{position:"fixed",inset:0,zIndex:90},onClick:()=>b(null)})]})}export{pe as P,me as u};
